RPL

::
  CLOSEUART
  RECLAIMDISP
  TURNMENUOFF
  ABUFF

  #E
  #1
  MAKEGROB


  DROP
CODEM
SAVE
C=DAT1 A
D1=C
D1=D1+ 5  %SALTO PROLOGO
D1=D1+ 5  %SALTO SIZE
D1=D1+ 5  %SALTO NUMERO DE FILAS
D1=D1+ 5  %SALTO NUMERO DE COLUMNAS
C=D1 A
R0=C A
LC 22 %CONTADOR DE datos (34d=22h)
D=C B %CONTADOR DE FIN DE LINEA

*PRINCIPAL
 %TRANSMISION
   $1BD0100 %HACE D1= 0010D QUE ES EL ENTER POINT DE
   %VELOCIDAD
   C=DAT0 B   %CARGA EL CONTENIDO DE LA DIRECION DEL SETEO
   CBIT=0 0   %SETEA A 1 EL BIT 0
   CBIT=1 1   %SETEA A 1 EL BIT 1
   CBIT=1 2   %SETEA A 1 EL BIT 2
   DAT0=C B   %MUEVE EL VALOR SETEADO A LA DIRECCION DEL EP
   $1B01100 %HACE D1= 00110 UART INTERRUPT REGISTER
   C=DAT0 B
   CBIT=1 3 %HABILITA EL RECV BUFFER Y EL WIRE ENABLE SERIAL
   DAT0=C B   %MUEVE EL VALOR A LA DIRECCION
   *BUCLE     %SE FIJA SI EL BIT 0 DE LA DIRECCION
   $1B11100   %SE FIJA EN LA DIRECCION 00111 SI EL BIT 0
   %00111 ESTA ACTIVO, EN ESE CASO ES PORQUE
   %EL BUFFER TIENE UN DATO
   C=DAT0 B
   ?CBIT=0 0
   GOYES BUCLE
   $1B41100 %REGISTRO 00114
           %TRAIGO DOS NIBLES 00114 Y 00115
           %SALVO EL STACK
   A=0 W
   A=DAT0 B

ASRB B %SHIFT DERECHA UN BIT
ASRB B %SHIFT DERECHA UN BIT

A=-A B    %HAGO: (64-POSICION) =LINEA
A=A+64 B
%A=A+64 B  %para subir la grafica
%A=A+64 B  %para subir la grafica
%A=A+64 B  %para subir la grafica
LC 00022  %carga 34
GOSBVL =MUL#    %(#03991) B[A] = A[A] * C[A]
C=R0 A   %CARGA EL PRINCIPIO DEL BODY DEL GROB
B=B+C A
C=D1 A %CARGA EL VALOR DE LA POSICION DEL ULTIMO NIBBLE GUARDADO
?C>=B A
GOYES DECREMENTO
GOSUBL INCREMENTO
GOTO LINEA
*DECREMENTO
C=C-34 A
?C>B A
GOYES DECREMENTO
*LINEA
%RECOMPONER EL DATO E IMPRIMIRLO
D1=C
LC 07
DAT1=C B   %imprime el dato en pantalla
D1=D1+ 1
D=D-1 B  %FIN DE CADENA
?D=0 B
GOYES ON
GOLONG PRINCIPAL
*ON
%-----------------rutina de tecla ON para salir-----------------
ST=0 15
*LOOP1
GOSBVL =CINRTN
?CBIT=0 15
GOYES LOOP1
ST=1 15
GOSUB REINT
LOADRPL
*REINT
RTI
*INCREMENTO
?C>=B A
RTNYES
C=C+34 A
GOTO INCREMENTO

ENDCODE
DROP
TURNMENUON
 RECLAIMDISP



;
